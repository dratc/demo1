<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Order Preview</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css">
</head>
<body>
    <div class="container mt-5">
        <h3 class="fw-bold">üõç Order Preview</h3>
        <table class="table">
            <thead>
                <tr>
                    <th>Product</th>
                    <th>Size</th>
                    <th>Quantity</th>
                    <th>Price</th>
                </tr>
            </thead>
            <tbody id="previewOrderBody">
                <!-- Dynamically populated -->
            </tbody>
            <tfoot>
                <tr>
                    <td colspan="3"><strong>Subtotal</strong></td>
                    <td id="previewSubtotal">‡ß≥ 0.00</td>
                </tr>
                <tr>
                    <td colspan="3"><strong>Shipping</strong></td>
                    <td id="previewShipping">‡ß≥ 0.00</td>
                </tr>
                <tr class="table-light">
                    <td colspan="3"><strong>Total</strong></td>
                    <td id="previewTotal">‡ß≥ 0.00</td>
                </tr>
            </tfoot>
        </table>
        <button id="confirmOrder" class="btn btn-danger mt-3">‚úÖ Confirm Order</button>
    </div>

    <script>
        document.addEventListener("DOMContentLoaded", function () {
            const orderDetails = JSON.parse(localStorage.getItem("orderDetails"));

            if (!orderDetails || orderDetails.products.length === 0) {
                document.body.innerHTML = "<h3 class='text-center text-danger'>‚ö†Ô∏è No order found. Please go back and select products.</h3>";
                return;
            }

            const previewOrderBody = document.getElementById("previewOrderBody");
            const previewSubtotal = document.getElementById("previewSubtotal");
            const previewShipping = document.getElementById("previewShipping");
            const previewTotal = document.getElementById("previewTotal");

            orderDetails.products.forEach(product => {
                const row = document.createElement("tr");
                row.innerHTML = `
                    <td>${product.name}</td>
                    <td>${product.size}</td>
                    <td>${product.quantity}</td>
                    <td>‡ß≥ ${product.price}</td>
                `;
                previewOrderBody.appendChild(row);
            });

            previewSubtotal.textContent = `‡ß≥ ${orderDetails.subtotal}`;
            previewShipping.textContent = `‡ß≥ ${orderDetails.shipping}`;
            previewTotal.textContent = `‡ß≥ ${orderDetails.total}`;

            document.getElementById("confirmOrder").addEventListener("click", function () {
                alert("üéâ Your order has been confirmed!");
                localStorage.removeItem("orderDetails");
                window.location.href = "index.html"; // Redirect to home page
            });
        });
    </script>
</body>
</html>
